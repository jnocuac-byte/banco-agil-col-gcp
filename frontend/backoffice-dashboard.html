<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BackOffice - Gestión de Solicitudes</title>
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="images/EmpresaBancoAgil/favicon_32x32.png">
    <link rel="icon" type="image/png" href="images/EmpresaBancoAgil/favicon_32x32.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/backoffice-dashboard.css">
</head>
<body>
    <!-- Contenedor principal de la página -->
    <div class="page-container">
        <aside class="sidebar">
             <!-- Menú lateral -->
            <div class="menu-icon-wrapper">
                 <!-- Icono de menú hamburguesa -->
                <button id="menuToggle" class="menu-icon" aria-label="Alternar menú" aria-expanded="false" type="button">
                     <!-- Tres barras del icono hamburguesa -->
                    <span class="hamburger-bar"></span>
                    <span class="hamburger-bar"></span>
                    <span class="hamburger-bar"></span>
                </button>
            </div>
             <!-- Navegación del menú lateral -->
            <nav class="sidebar-nav">
                 <!-- Enlace activo a la página de solicitudes -->
                <a href="backoffice-dashboard.html" class="nav-item active" title="Solicitudes">
                    <i class="fas fa-clipboard-list icon-placeholder"></i>
                    <span class="icon-text">Solicitudes</span>
                </a>
                 <!-- Otros enlaces del menú -->
                <a href="backoffice-usuarios.html" class="nav-item" title="Usuarios">
                    <i class="fas fa-users icon-placeholder"></i>
                    <span class="icon-text">Usuarios</span>
                </a>
                 <!-- Más enlaces según sea necesario -->
                <a href="#reportes" class="nav-item" title="Reportes">
                    <i class="fas fa-chart-bar icon-placeholder"></i>
                    <span class="icon-text">Reportes</span>
                </a>
                 <!-- Enlace a perfil de usuario -->
                 <a href="backoffice-perfil.html" class="nav-item" title="Mi Perfil">
                    <i class="fas fa-user-circle icon-placeholder"></i>
                    <span class="icon-text">Mi Perfil</span>
                </a>
            </nav>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
             <!-- Encabezado con logo y área de usuario -->
            <header class="header">
                 <!-- Área del logo y nombre de la sucursal -->
                <div class="logo-area">
                    <div class="logo-placeholder">Banco Agil Col</div>
                    <span class="branch-name">Backoffice Asesores</span>
                </div>
                 <!-- Área de usuario con nombre y botón de logout -->
                <div class="user-area">
                    <span class="user-name-header" id="userName">Bienvenido Asesor</span>
                    <div class="user-icon-placeholder"></div>
                    <button class="logout-btn" onclick="logout()">Cerrar sesión</button>
                </div>
            </header>
            
             <!-- Sección principal del cuerpo de la página -->
            <section class="page-body-content">
                 <!-- Tarjeta de bienvenida y estadísticas -->
                <div class="greeting-bar">
                    <h1 class="greeting-text" id="greeting">Gestión de Solicitudes</h1>
                    <span class="date-time">Dashboard para asesores</span>
                </div>

                 <!-- Estadísticas rápidas -->
                <div class="stats-grid">
                     <!-- Tarjeta de estadísticas personalizada -->
                    <div class="stat-card stat-card-custom stat-card-pendientes">
                        <div class="stat-header">
                            <span class="stat-title">Pendientes</span>
                            <i class="fas fa-clock stat-icon" style="color: var(--color-primary-purple);"></i>
                        </div>
                        <div class="stat-value" id="statPendientes">0</div>
                    </div>

                     <!-- Tarjeta de estadísticas personalizada -->
                    <div class="stat-card stat-card-custom stat-card-revision">
                        <div class="stat-header">
                            <span class="stat-title">En Revisión</span>
                            <i class="fas fa-search stat-icon" style="color: var(--color-primary-cyan);"></i>
                        </div>
                        <div class="stat-value" id="statRevision">0</div>
                    </div>

                     <!-- Tarjeta de estadísticas personalizada -->
                    <div class="stat-card stat-card-custom stat-card-aprobadas">
                        <div class="stat-header">
                            <span class="stat-title">Aprobadas Hoy</span>
                            <i class="fas fa-check-circle stat-icon" style="color: var(--color-primary-green);"></i>
                        </div>
                        <div class="stat-value" id="statAprobadas">0</div>
                    </div>

                     <!-- Tarjeta de estadísticas personalizada -->
                    <div class="stat-card stat-card-custom stat-card-total">
                        <div class="stat-header">
                            <span class="stat-title">Total Solicitudes</span>
                            <i class="fas fa-list-alt stat-icon" style="color: var(--color-primary-yellow);"></i>
                        </div>
                        <div class="stat-value" id="statTotal">0</div>
                    </div>
                </div>

                 <!-- Filtros y tabla de solicitudes -->
                <div class="filters welcome-card">
                    <label for="filtroEstado" class="announcement-title">Filtrar por Estado:</label>
                    <select id="filtroEstado" class="filter-select" onchange="filtrarSolicitudes()">
                        <option value="TODAS">Todas</option>
                        <option value="PENDIENTE">Pendientes</option>
                        <option value="EN_REVISION">En Revisión</option>
                        <option value="APROBADA">Aprobadas</option>
                        <option value="RECHAZADA">Rechazadas</option>
                    </select>
                </div>

                 <!-- Contenedor de la tabla de solicitudes -->
                <div class="table-container product-list-container">
                    <table>
                         <!-- Encabezado de la tabla -->
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cliente</th>
                                <th>Monto</th>
                                <th>Plazo</th>
                                <th>Tasa</th>
                                <th>Estado</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                         <!-- Cuerpo de la tabla donde se insertan las solicitudes -->
                        <tbody id="tablaSolicitudes">
                            <tr>
                                <td colspan="8" class="empty-state">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Cargando solicitudes...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

     <!-- Scripts -->
    <script src="js/backoffice-dashboard.js"></script>
     <!-- Script de gestión de solicitudes -->
    <script>
        // Inicializar el toggle del menú y cargar los datos
        document.addEventListener('DOMContentLoaded', () => {
            cargarSolicitudes();
        });
    </script>
</body>
</html>